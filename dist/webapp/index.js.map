{
  "version": 3,
  "sources": ["../../webapp/index.ts"],
  "sourcesContent": ["\nimport { OfferModel, PreferenceModel } from '../src-web/models';\nimport { MaleabilityReport } from '../src/protocol';\nimport { MatchingEngine } from '../src-web/matching-api';\n\ndeclare global {\n    interface Window {\n        offersFound: number\n        highlightOrders: string\n        model: {\n            profile: PreferenceModel,\n            offers: OfferModel[],\n            contracts: OfferModel[]\n        },\n        pickOrGenerateOffer: (pick: boolean) => Promise<OfferModel>\n        removeInterest: (tag: string) => void\n        createOfferInfo: (offer: OfferModel, isTentative: boolean, isFullInfo?: boolean) => HTMLElement\n        renderOfferDetails: (offer: OfferModel) => void\n        renderOfferPreview: (where: HTMLElement, offer: OfferModel, append: boolean) => HTMLElement\n        renderContractPreview: (where: HTMLElement, contract: OfferModel) =>  void\n\n        copyAddressToBuffer: () => void\n        switchTab: (tab: string) => void\n\n        matching: MatchingEngine\n\n        DarkReader: any\n    }\n}\n\nsetTimeout(() => {\n    if(!window.offersFound){\n        location.reload()\n    }\n}, 7000)\n\nlet loading_i = 0\nconst loadingAnimation = setInterval(() => {\n    if (document.getElementById(\"loading\").innerText !== \"\") {\n        loading_i++\n        document.getElementById(\"loading\").innerText = \"Loading\" + \".\".repeat(loading_i % 3)\n    } else {\n        clearInterval(loadingAnimation)\n    }\n}, 500)\n\nconst defaultClr = \"gray\"\nconst accentColor = \"yellow\" \nwindow.highlightOrders = \"cyan\"  \n\nconst conf = {\n    brightness: 80,\n    contrast: 200,\n    sepia: 80\n}\n\n\nconst recolor = () => {\n    try {\n\n        if (document.getElementById(\"matching_svg\") &&\n        document.getElementById(\"profile_svg\") &&\n        document.getElementById(\"contracts_svg\")) {\n\n            \n            window.DarkReader.setFetchMethod(window.fetch)\n\n            document.getElementById(\"contracts_svg\").setAttribute(\"fill\", defaultClr)\n            document.getElementById(\"matching_svg\").setAttribute(\"fill\", accentColor)\n                \n            document.getElementById(\"matching_svg\").style.filter = \"brightness(2.0)\"\n            document.getElementById(\"contracts_svg\").style.filter = \"brightness(3.7)\"\n            document.getElementById(\"profile_svg\").style.filter = \"brightness(3.7)\"\n\n            document.getElementById(\"profile_svg\").setAttribute(\"fill\", defaultClr)\n                \n            \n            window.DarkReader.enable(conf);\n            //clearInterval(color)\n        }\n\n    } catch {\n\n    }\n    \n}\n\ntry {\n    recolor()\n} catch {\n\n}\n\ntry {\n    const container = document.getElementById(\"offer-tree-container\")\n    const containerReports = document.getElementById(\"report-tree-container\")\n\n    if (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\")) {\n        \n        const el = document.createElement(\"div\")\n        el.setAttribute(\"id\", \"offer-tree\")\n        container.appendChild(el)\n\n        const el2 = document.createElement(\"div\")\n        el2.setAttribute(\"id\", \"report-tree\")\n        containerReports.appendChild(el2)\n    } else {\n        const scriptTag = document.createElement('script');\n        scriptTag.src = \"https://unpkg.com/@alenaksu/json-viewer@2.1.0/dist/json-viewer.bundle.js\";\n        document.body.appendChild(scriptTag);\n        \n        const el = document.createElement(\"json-viewer\")\n        el.setAttribute(\"id\", \"offer-tree\")\n        container.appendChild(el)\n\n        const el2 = document.createElement(\"json-viewer\")\n        el2.setAttribute(\"id\", \"report-tree\")\n        containerReports.appendChild(el2)\n    }\n    \n} catch {}\n\ndocument.getElementById(\"matching_svg\").addEventListener(\"load\", () => {\n    document.getElementById(\"matching_svg\").setAttribute(\"fill\", \"brown\")\n})\n            \nwindow.switchTab = (tabname) => {\n    document.getElementById(\"matching\").style.display = \"none\"\n    document.getElementById(\"contracts\").style.display = \"none\"\n    document.getElementById(\"profile\").style.display = \"none\"\n    document.getElementById(\"offer\").style.display = \"none\"\n\n    try {\n\n        document.getElementById(\"contracts_svg\").setAttribute(\"fill\", defaultClr)\n        document.getElementById(\"matching_svg\").setAttribute(\"fill\", defaultClr)\n        \n        document.getElementById(\"profile_svg\").setAttribute(\"fill\", defaultClr)\n        \n        document.getElementById(tabname+\"_svg\").setAttribute(\"fill\", accentColor)\n    } catch (e) {\n        console.log(e)\n    }\n        \n    document.getElementById(tabname).style.display = \"block\"\n    \n}\n\n//await on original init does not work; browser bug\nconst initWebapp = new Promise(resolve => { \n    const cancel = setInterval(() => {\n        if (window.pool && window.matching && window.matching.loadProfile) {\n            clearInterval(cancel)\n            resolve(null)\n        }\n    }, 100)\n});\n\n\n(async () => { //jsdom doesn't support modules..we simulate one\n\n    await initWebapp \n\n    setTimeout(() => {\n        window.matching.collectOffers(window.model.profile)                  \n        setInterval(() => window.progressOffers(), 5000)\n        window.matching.collectQuestions(window.model.profile)    \n    }, 4000)\n\n\n    setInterval(() => {\n        try {\n            document.getElementById(\"peers\").innerText = \"\" + window.peerlist.length\n        } catch {\n\n        }    \n    }, 1000)\n\n    window.model = {\n        profile: undefined,\n        offers: [],\n        contracts: []\n    }\n\n    setTimeout(async () => {\n        const profile = await window.matching.loadProfile();\n        if (profile === undefined) {\n            return\n        }\n        \n        window.model.profile = profile;\n        window.document.dispatchEvent(new Event('init-model'));\n        document.getElementById(\"ranktext\").innerText = \"\" + window.model.profile.minOracleRank;\n        (document.getElementById(\"oracle-strength\") as HTMLInputElement).valueAsNumber = window.model.profile.minOracleRank;\n        (document.getElementById(\"txfee\") as HTMLInputElement).valueAsNumber = window.model.profile.txfee; \n\n        document.getElementById(`tag-world`).remove();\n        document.getElementById(`tag-sports`).remove();\n\n        profile.tags = [...new Set(profile.tags )]\n        profile.tags.forEach(tag => {\n            const btn = document.createElement(\"button\");\n            btn.className=\"tag-button\";\n            btn.id = `tag-${tag}`;\n            btn.innerText = tag;\n            btn.onclick = () => {\n                window.removeInterest(tag);\n            }\n            document.getElementById(\"tags\").appendChild(btn)\n        })\n\n    }, 1000)\n    \n    try {\n        document.getElementById(\"oracle-strength\").onchange = () => {\n            window.model.profile.minOracleRank = (document.getElementById(\"oracle-strength\") as HTMLInputElement).valueAsNumber\n            document.getElementById(\"ranktext\").innerText = \"\" + window.model.profile.minOracleRank\n            window.matching.saveProfile(window.model.profile) \n        }\n    } catch (e) {\n        console.error(e)\n    }\n\n    try {\n        document.getElementById(\"txfee\").onchange = () => {\n            window.model.profile.txfee = (document.getElementById(\"txfee\") as HTMLInputElement).valueAsNumber; \n            window.matching.saveProfile(window.model.profile) \n        }\n    } catch (e) {\n        console.error(e)\n    }\n\n    document.getElementById(\"send-funds-button\").onclick = async () => {\n        try {\n            const amount = (document.getElementById(\"send-funds-amount\") as HTMLInputElement).valueAsNumber\n            const address = (document.getElementById(\"send-funds-address\") as HTMLInputElement).value\n            const tx = window.matching.takeWinnings(amount + window.model.profile.txfee, address, window.model.profile.txfee)\n            navigator.clipboard.writeText(await tx)\n            alert(\"Copied TxBody To Clipboard!\")\n        } catch (e) {\n            alert(e.message)\n        }\n\n    }\n\n    window.pickOrGenerateOffer = async (pick: boolean) => {\n        if (pick) {\n            try {\n                return await window.matching.pickOffer(window.model.profile)\n            } catch (e) {\n                console.error(e)\n                return await window.matching.generateOffer(window.model.profile)\n            }\n            \n        } else {\n            return await window.matching.generateOffer(window.model.profile)\n        }\n    }\n\n    window.document.dispatchEvent(new Event('init-offer-controller'));\n\n    window.removeInterest = (tag: string) => {\n        window.model.profile.tags = window.model.profile.tags.filter(x => x != tag)\n        document.getElementById(`tag-${tag}`).remove()\n        window.matching.saveProfile(window.model.profile) \n    }\n\n\n    document.getElementById(\"interest\").addEventListener(\"keypress\", function(event) {\n    if (event.key === \"Enter\") {\n        document.getElementById(\"add-interest-button\").click();\n    }\n    })\n\n    document.getElementById(\"add-interest-button\").onclick = () => {\n        const tag = (document.getElementById(\"interest\") as HTMLInputElement).value\n        if (window.model.profile.tags.find(x => x === tag)) {\n            return\n        }\n        const btn = document.createElement(\"button\")\n        btn.className=\"tag-button\"\n        btn.id = `tag-${tag}`\n        btn.innerText = tag;\n        window.model.profile.tags.push(tag)\n        btn.onclick = () => {\n            window.removeInterest(tag)\n        }\n        document.getElementById(\"tags\").appendChild(btn)\n\n    }\n\n    window.createOfferInfo = (offer, isTentative = false, isFullInfo = false) => {\n        const offerInfo = document.createElement(\"div\")\n        function chunkString(sStr, iLen) {\n            return [...sStr].reduce((aChunks, sChar, iIdx) => ( \n            aChunks.push(iIdx % iLen === 0 ? sChar : aChunks.pop() + sChar), aChunks), [])\n        }\n        const offerQuestion = document.createElement(\"span\")\n        offerQuestion.style = \"\"\n        offerQuestion.innerHTML = `<pre><span color=\"purple\" style = \"display:inline-block; max-width: 15ch; overflow: hidden; text-overflow: ellipsis;\">${offer.question}</span></pre>`\n        \n        //textFit(offerQuestion.getElementById(\"question\")) \n        const offerBet = document.createElement(\"pre\")\n        offerBet.innerHTML = `<font color = \"grene\">${offer.bet[0]}:${offer.bet[1]} sat</font>`\n\n\n        const oracle = document.createElement(\"pre\")\n        oracle.innerHTML = `<font color=\"brown\">${offer.oracles[0].oracle.slice(0, 15) + \"...\" + (offer.oracles.length > 1 ? \" +\" : \"\")}</font>`\n        const oracleEndpoint = document.createElement(\"pre\")\n        oracleEndpoint.innerHTML = `<font color=\"brown\">${offer.oracles[0].endpoint.replace(\"http://\", \"\").replace(\"https://\", \"\").slice(0, 15) + (offer.oracles.length > 1 ? \"+\" : \"\")}</font>`\n\n\n        offerInfo.appendChild(offerQuestion)\n        offerInfo.appendChild(offerBet)\n        offerInfo.appendChild(oracle)\n        offerInfo.appendChild(oracleEndpoint)\n\n        if (offer.status && !isTentative) {\n            const rename = (status) => {\n                if (status === \"oracle committed\") {\n                    return \"accepted, oracle committed\"\n                } else {\n                    return status\n                }\n            }\n            const offerStatus = document.createElement(\"pre\")\n            offerStatus.innerHTML = `<font color=\"white\">${rename(offer.status)}</font>`\n            offerInfo.appendChild(offerStatus)\n            if (offer.role === \"acceptor\" && !offer.betOn || offer.role === \"initiator\" && offer.betOn) {\n                offerBet.innerHTML = `<font color = \"grene\">[u bet ${offer.bet[0]} sat on YES]:${offer.bet[1]}</font>`\n            } else {\n                offerBet.innerHTML = `<font color = \"grene\">${offer.bet[0]}:[u bet ${offer.bet[1]} sat on NO]</font>`\n            }\n            oracle.innerHTML = `<font color=\"brown\">${offer.oracles[0].oracle.slice(0, 30) + \"...\" + (offer.oracles.length > 1 ? \" +\" : \"\")}</font>`\n            oracleEndpoint.innerHTML = `<font color=\"brown\">${offer.oracles[0].endpoint.replace(\"http://\", \"\").replace(\"https://\", \"\").slice(0, 30) + (offer.oracles.length > 1 ? \"+\" : \"\")}</font>`\n                \n        }\n        return offerInfo\n    }\n\n    window.renderOfferPreview = (where: HTMLElement, offer: OfferModel, append = true) => {\n        const downArrowSvg = document.createElement(\"img\")\n        downArrowSvg.src = \"./assets/down.svg\"\n        downArrowSvg.className = \"offer-button\"\n        downArrowSvg.onclick = () => {\n            window.renderOfferDetails(offer)\n        }\n\n\n        const yesSvg = document.createElement(\"img\")\n        yesSvg.src = \"./assets/yes.svg\"\n        yesSvg.className = \"offer-button\"\n        yesSvg.onclick = () => {\n            let confirmed = undefined\n            if ((document.getElementById(\"confirm_orders\") as HTMLInputElement).checked) {\n                confirmed = confirm(\"Bet \" + offer.bet[1] + \" sat against '\" + offer.question + \"'\")\n            } else {\n                confirmed = true\n            }\n            if (confirmed) {\n                console.log(offer.status)\n                    if (offer.role === 'initiator') {\n                        window.matching.broadcastOffer(offer)\n                    } else {\n                        if (!offer.betOn) {\n                            window.matching.acceptOffer(offer)\n                        } else {\n                            console.log(\"Needs opposite position to accept\")\n                        }\n                    }\n                    \n                }\n        }\n\n\n        const noSvg = document.createElement(\"img\")\n        noSvg.src = \"./assets/no.svg\"\n        noSvg.className = \"offer-button\"\n        noSvg.onclick = () => {\n            let confirmed = undefined\n            if ((document.getElementById(\"confirm_orders\") as HTMLInputElement).checked) {\n                confirmed = confirm(\"Bet \" + offer.bet[1] + \" sat against '\" + offer.question + \"'\")\n            } else {\n                confirmed = true\n            }          \n            if (confirmed) {\n                if (offer.role === 'initiator') {\n                    window.matching.broadcastOffer(offer)\n                } else {\n                    if (offer.betOn) {\n                        window.matching.acceptOffer(offer)\n                    } else {\n                        console.log(\"Needs opposite position to accept\")\n                    }\n                    \n                }  \n            }     \n        }\n            \n        const updateSvg = document.createElement(\"img\")\n        updateSvg.src = \"./assets/cycle.svg\"\n        updateSvg.className = \"offer-button\"\n        \n        const offerInfo = window.createOfferInfo(offer, true)\n        offerInfo.className = \"offer-info\"\n        \n\n        const panel = document.createElement(\"div\")\n        panel.className = \"panel offer-preview\"\n        panel.appendChild(updateSvg)\n        panel.appendChild(offerInfo)\n\n        if (offer.role !== 'initiator' && offer.betOn) {\n            yesSvg.style = \"filter: grayscale(1)\"\n        }\n        panel.appendChild(yesSvg)\n\n        if (offer.role !== 'initiator' && !offer.betOn) {\n            noSvg.style = \"filter: grayscale(1)\"\n        } \n        panel.appendChild(noSvg)\n\n        \n        panel.appendChild(noSvg)\n        panel.appendChild(downArrowSvg)\n\n        \n        updateSvg.onclick = async () => {\n            const newOffer = await window.pickOrGenerateOffer(Math.random() < 0.5)\n            const panel2 = window.renderOfferPreview(where, newOffer, false)\n            where.replaceChild(panel2, panel)\n        }\n        \n        if (append) {\n            where.appendChild(panel)\n        }\n        \n        return panel\n\n    }\n\n    const maxMatching = 3\n    window.offersFound = 0\n\n    const camcel = setInterval(async () => {\n        if (window.offersFound >= maxMatching - 1) {\n            clearInterval(camcel)\n        }\n        try {\n            const offer = await window.matching.generateOffer(window.model.profile)\n            window.offersFound++\n            window.model.offers.push(offer)\n            window.renderOfferPreview(document.getElementById(\"matching\"), offer, true)\n            document.getElementById(\"loading\").innerText = \"\"\n        } catch {\n\n        }\n\n    }, 500)\n\n    window.copyAddressToBuffer = () => {\n        navigator.clipboard.writeText(window.address)\n        alert('Copied to Clipboard')\n    }\n\n    setInterval(async () => {\n        try {\n            const address =  window.address.length > 20 ? \n            window.address.slice(0, 30) + \"...\"//\"n3W8YyK59F6vQe34uQ8n835L627k2J\"\n            : window.address\n\n            try {\n                const user = window.user === 'default' ? '' : ` (${window.user})`\n                const stats = await (await fetch(\"https://mempool.space/testnet/api/address/\" + window.address)).json()\n                const bal = stats.chain_stats.funded_txo_sum - stats.chain_stats.spent_txo_sum\n                const balance = bal === 0 ? \"0,000 sat\" : bal.toLocaleString() + \" sat\"\n                document.getElementById(\"wallet-balance\").innerText = balance + user\n\n            } catch {\n                const balance = \"0,000 sat\"\n                document.getElementById(\"wallet-balance\").innerText = balance + window.user\n            }\n            document.getElementById(\"wallet-address\").innerText = address\n        } catch {\n\n        }\n    }, 1000)\n    \n    window.renderOfferDetails = async (offer) => {\n        window.switchTab(\"offer\")\n        const offerInfo = window.createOfferInfo(offer, false)\n        offerInfo.className = \"offer-info\"\n        const terms = document.getElementById(\"terms\")\n        terms.innerHTML = \"\"\n        terms.appendChild(offerInfo)\n        const tree = document.getElementById(\"offer-tree\")\n        tree[\"data\"] = offer\n\n        const reports = await window.matching.fetchRelatedReports(offer, 20)\n        const reportsIssued = await window.matching.fetchRelatedReports(offer, 20)\n        const combined = {}\n        combined[\"collected-known\"] = reports\n        combined[\"broadcasting-issued\"] = reportsIssued\n\n        const reportTree = document.getElementById(\"report-tree\")\n        reportTree[\"data\"] = combined\n\n        document.getElementById(\"delete-offer\").onclick = () => {\n            window.storage.removeOffers([offer.id])\n        }\n        document.getElementById(\"delete-cp\").onclick = () => {\n            window.storage.removeCps([offer.oracles[0].capabilityPub])\n        }\n    }\n\n    window.renderContractPreview = (where: HTMLElement, contract: OfferModel) => {\n        const downArrowSvg = document.createElement(\"img\")\n        downArrowSvg.src = \"./assets/down.svg\"\n        downArrowSvg.className = \"offer-button\"\n        downArrowSvg.onclick = () => {\n            window.renderOfferDetails(contract)\n        }\n\n        const removeSvg = document.createElement(\"img\")\n        removeSvg.src = \"./assets/remove.svg\"\n        removeSvg.className = \"offer-button\"\n        removeSvg.onclick = () => {\n            window.matching.removeOrder(contract.id)\n        }\n\n        const offerInfo = window.createOfferInfo(contract, false)\n        offerInfo.className = \"contract-info\"\n        const panel = document.createElement(\"div\")\n        panel.className = \"panel wide-panel\"\n        panel.appendChild(removeSvg)\n\n        panel.appendChild(offerInfo)\n\n        \n\n        panel.appendChild(downArrowSvg)\n        where.appendChild(panel)\n    }\n\n    \n\n    window.model.contracts.forEach(contract => {\n        window.renderContractPreview(document.getElementById(\"contracts\"), contract)\n    })\n\n    setInterval(async () => {\n        try {\n        \n            const orders = await window.matching.listOrders(20)\n            const odersCensored = orders.map(o => {\n                const copy = structuredClone(o)\n                copy[\"msg\"] = undefined\n                copy.oracles[0][\"msg\"]\n                return copy\n            })\n\n            const contractsCensored = window.model.contracts.map(o => {\n                const copy = structuredClone(o)\n                copy[\"msg\"] = undefined\n                copy.oracles[0][\"msg\"]\n                return copy\n            })\n\n            if (JSON.stringify(odersCensored) === JSON.stringify(contractsCensored)) {\n                return\n            }\n\n            document.getElementById(\"contracts\").innerHTML = \"\";\n            window.model.contracts = orders\n            orders.forEach(contract => {\n                window.renderContractPreview(document.getElementById(\"contracts\"), contract)\n            })\n\n            if (window.model.contracts.length > 0) {\n                try {\n                    let i = 0\n                    const before = document.getElementById(\"contracts_svg\").getAttribute(\"fill\")\n                    const beforeFilter = document.getElementById(\"contracts_svg\").style.filter = document.getElementById(\"contracts_svg\").style.filter\n                    const blink = setInterval(() => {\n                        i++\n                        document.getElementById(\"contracts_svg\").setAttribute(\"fill\", i % 2 == 0? before : window.highlightOrders)\n                        document.getElementById(\"contracts_svg\").style.filter = i % 2 == 0?  \"brightness(1.5)\" : \"brightness(1.5)\"\n                        if (i > 5) {\n                            document.getElementById(\"contracts_svg\").style.filter = beforeFilter\n                            document.getElementById(\"contracts_svg\").setAttribute(\"fill\", before)\n                            clearInterval(blink)\n                        }\n                    }, 300)\n                    \n                } catch {\n\n                }\n                \n            }\n        } catch {\n\n        }\n        \n    }, 100)\n})();\n\n\n"],
  "mappings": "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",
  "names": []
}
