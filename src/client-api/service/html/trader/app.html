<html>
    <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimal-ui, initial-scale=0.7">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="mobile-web-app-status-bar-style" content="black-translucent">
        
        <style>
            .panel, .profile, .offer-view, .box {
                border: 2px solid rgb(96 139 168);
                background: rgb(96 139 168);
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .profile, .offer-view {
                border: none;
            }

            .profile-group, .offer-info-group {
                border: none;
                padding: 10px
            }

            .scrollable {
                overflow-y: scroll;
                height: 74%;
                
                -ms-overflow-style: none;  /* Internet Explorer 10+ */
                scrollbar-width: none;  /* Firefox */
            }

            .scrollable::-webkit-scrollbar { 
                display: none;  /* Safari and Chrome */
            }

            .wide-panel {
                border: 2px solid black;
                width: 99%;
                justify-content:space-between
            }

            .offer-info {
                width: 99%;
            }

            .offer-preview {
                width: 99%;
                overflow-x: hidden;
                position: relative;
            }

            .contract-info {
                margin-left: 10px;
                width: 99%;
                justify-content:left
            }

            .button, .offer-button {
                background: none;
                padding: 2;
                display: flex;

            }

            .button {
                width: 10rem;
                height: 10rem;
            }

            hr {
                border: 6px solid black;
            }

            html, body {
                overflow-x: hidden;
                overflow-y: hidden;
            }

            body {
                position: relative;
                overflow-y: hidden;
                max-height: 98%;
            }

            pre {
                font-size: large;
            }

            .copy-button {
                width: 2rem;
                height: 2rem;
            }

            .tag-button, .add-interest-button, .send-funds-button {
                border-radius: 12px;
                background-color: #04AA6D;
                border: none;
                color: white;
                padding: 10px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
            }

            .add-interest-button, .send-funds-button {
                border-radius: 1px;
                margin: 0px 0px;
                padding: 5px 10px;
            }

            .offer-button {
                width: 5rem;
                height: 5rem;
            }

            .add-interest, .send-funds-amount, .send-funds-address {
                font-weight:300;
                font-size: 16px;
                border:0px;
                outline: none;
                width: 50%;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
                color: #4b545f;
                background: #fff;
                font-family: Open Sans,Verdana;
                padding: 5px 15px;
                margin: 0px 0px;
                -webkit-transition: all 0.1s ease-in-out;
                -moz-transition: all 0.1s ease-in-out;
                -ms-transition: all 0.1s ease-in-out;
                -o-transition: all 0.1s ease-in-out;
                transition: all 0.1s ease-in-out;
                background-color: grey
            }

            .send-funds-amount {
                width: 80px 
            }


            .slidecontainer {
                width: 100%; /* Width of the outside container */
            }


            .slider-color {
                width: 100%;
                height: 15px;
                border-radius: 5px;
                background: #d3d3d3;
                outline: none;
                opacity:0.7;
                -webkit-transition: opacity .15s ease-in-out;
                transition: opacity .15s ease-in-out;
            }
            
            .slider-color:hover {
                opacity:1;
            }
            
            .slider-color::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 25px;
                height: 25px;
                border-radius: 50%;
                background: #04AA6D;
                cursor: pointer;
            }
                
            .slider-color::-moz-range-thumb {
                width: 25px;
                height: 25px;
                border: 0;
                border-radius: 50%;
                background: #04AA6D;
                cursor: pointer;
            }
                            
              
        </style>
    </head>
    <body style="background-color:black;">

        <pre class="box">
Balance: 10000 sat
Address: n3W8YyK59F6vQe34uQ8n835L627k2J <img src="./assets/copy.svg" class="copy-button" onclick="alert('copy!')"></pre>

        <div id="matching"class="scrollable" ></div>
        <div id="contracts" class="scrollable" style="display:none"></div>
        <div id="profile" class="scrollable profile" style="display:none" class="profile">
            <div class="profile-group">
                <pre><h3>Oracle Filter</h3></pre>
                <pre>Strength: </pre>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider-color" id="oracle-strength">
                </div>
                <pre>Reputation: </pre>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider-color" id="oracle-reputation">
                </div>
            </div>
            <hr>
            <div class="profile-group">
                <pre><h3>Interests:</h3> <input class="add-interest"> <button class="add-interest-button">+</button></pre>
                <div>
                    <button class="tag-button">sports</button>
                    <button class="tag-button">world</button>
                </div>

            </div>
            <hr>
            <div class="profile-group">
                <pre><h3>Withdraw funds:</h3> amount: <input class="send-funds-amount" type="number" value="0"><br><br> address: <input class="send-funds-address" value="n3W8YyK59F6vQe34uQ8n835L627k2J"> <button class="send-funds-button">Send</button></pre>
            </div>
        </div>

        <div id="offer" class="scrollable offer-view" style="display:none">
            <div class="offer-info-group">
                <h4>Offer Terms: </h4>
                <div id="terms"></div>
            </div>
            <hr>
            <div class="offer-info-group">
                <h4>Oracle Details:</h4>
                <div id="oracle">PubKey: ABCDEF<br>Name: Wolfram</div>
            </div>
            <hr>
            <div class="offer-info-group">
            <h4>Capabilities Info:</h4>
            <div id="capability">PubKey: ABCDEF</div>
            </div>
            <hr>

            <div class="offer-info-group">
                <h4>Malleability Reports:</h4>
                <div id="reports">NONE</div>
            </div>
            <hr>
            
        </div>

        <pre></pre>
       

        <div id="panel" class="panel">
            <img src="./assets/trades.svg" class="button" onclick="switchTab('contracts')">
            <img src="./assets/trade.svg"  class="button"  onclick="switchTab('matching')">
            <img src="./assets/profile.svg"  class="button"  onclick="switchTab('profile')">
        </div>

        <script>

            const switchTab = (tabname) => {
                document.getElementById("matching").style.display = "none"
                document.getElementById("contracts").style.display = "none"
                document.getElementById("profile").style.display = "none"
                document.getElementById("offer").style.display = "none"

                document.getElementById(tabname).style.display = "block"

            }

            const wolfram = {
                id: "",
                name: "Wolfram",
                strength: 1000,
                reports: []
            }

            const model = {
                profile: {
                    tags: ["sports", "politics"]
                },
                offers: [{
                    id: "",
                    bet: "100:1 sat",
                    oracles: [wolfram],
                    question: "human  extinct \n in 20 years?",
                    accepted: false,
                    txid: "",

                },
                {
                    id: "",
                    bet: "50:1 sat",
                    oracles: [wolfram],
                    question: "human extinct \n in 10 years?",
                    accepted: false,
                    txid: "",

                },
                {
                    id: "",
                    bet: "20:1 sat",
                    oracles: [wolfram],
                    question: "human extinct \n in 5 years?",
                    accepted: false,
                    txid: "",

                },
                {
                    id: "",
                    bet: "5:1 sat",
                    oracles: [wolfram],
                    question: "human extinct \n in 1 year?",
                    accepted: false,
                    txid: "",

                }],
                contracts: [{
                        id: "",
                        bet: "100:1 sat",
                        betOn: true,
                        oracles: [wolfram],
                        question: "am i gonna win???",
                        accepted: false,
                        txid: "",
                        status: "MATCHING"

                    },
            
                    {
                        id: "",
                        bet: "100:1 sat",
                        betOn: true,
                        oracles: [wolfram],
                        question: "am i gonna win???",
                        accepted: false,
                        txid: "",
                        status: "TX_READY",
                        tx: ""

                    },
                    {
                        id: "",
                        bet: "100:1 sat",
                        betOn: true,
                        oracles: [wolfram],
                        question: "am i gonna win???",
                        accepted: false,
                        txid: "",
                        status: "SUBMIT"

                    },
                    {
                        id: "",
                        bet: "50:1 sat",
                        betOn: true,
                        oracles: [wolfram],
                        question: "am i gonna win???",
                        accepted: false,
                        txid: "",
                        status: "WIN"

                    },
                    {
                        id: "",
                        bet: "20:1 sat",
                        betOn: true,
                        oracles: [wolfram],
                        question: "am i gonna win???",
                        accepted: false,
                        txid: "",
                        status: "LOST"

                    }
            
                ]
            }

            const fetchOffers = () => {

            }

            const readContracts = () => {

            }

            const createOfferInfo = (offer) => {
                const offerInfo = document.createElement("div")
                const offerQuestion = document.createElement("pre")
                offerQuestion.innerText = offer.question

                const offerBet = document.createElement("pre")
                offerBet.innerText = offer.bet

                const oracle = document.createElement("pre")
                oracle.innerText = "oracle: " + offer.oracles[0].name + (offer.oracles.length > 1 ? "+" : "")

                offerInfo.appendChild(offerQuestion)
                offerInfo.appendChild(offerBet)
                offerInfo.appendChild(oracle)

                if (offer.status) {
                    const offerStatus = document.createElement("pre")
                    offerStatus.innerText = "status: " + offer.status
                    offerInfo.appendChild(offerStatus)
                }
                return offerInfo
            }

            const renderOfferPreview = (where, offer) => {
                const downArrowSvg = document.createElement("img")
                downArrowSvg.src = "./assets/down.svg"
                downArrowSvg.className = "offer-button"
                downArrowSvg.onclick = () => {
                    renderOfferDetails(offer)
                }

                const yesSvg = document.createElement("img")
                yesSvg.src = "./assets/yes.svg"
                yesSvg.className = "offer-button"


                const noSvg = document.createElement("img")
                noSvg.src = "./assets/no.svg"
                noSvg.className = "offer-button"

                const removeSvg = document.createElement("img")
                removeSvg.src = "./assets/remove.svg"
                removeSvg.className = "offer-button"

                
                const offerInfo = createOfferInfo(offer)
                offerInfo.className = "offer-info"
               

                const panel = document.createElement("div")
                panel.className = "panel offer-preview"
                panel.appendChild(removeSvg)
                panel.appendChild(offerInfo)

                
                panel.appendChild(yesSvg)
                panel.appendChild(noSvg)
                panel.appendChild(downArrowSvg)
                
                

                where.appendChild(panel)


            }

            model.offers.forEach(offer => {
                renderOfferPreview(document.getElementById("matching"), offer)
            })
            
             
            
            const renderOfferDetails = (offer) => {
                switchTab("offer")
                const offerInfo = createOfferInfo(offer)
                offerInfo.className = "offer-info"
                const terms = document.getElementById("terms")
                terms.innerHTML = ""
                terms.appendChild(offerInfo)
            }

            const renderContractPreview = (where, contract) => {
                const downArrowSvg = document.createElement("img")
                downArrowSvg.src = "./assets/down.svg"
                downArrowSvg.className = "offer-button"
                downArrowSvg.onclick = () => {
                    renderOfferDetails(contract)
                }

                const removeSvg = document.createElement("img")
                removeSvg.src = "./assets/remove.svg"
                removeSvg.className = "offer-button"


                const offerInfo = createOfferInfo(contract)
                offerInfo.className = "contract-info"
                const panel = document.createElement("div")
                panel.className = "panel wide-panel"
                panel.appendChild(removeSvg)

                panel.appendChild(offerInfo)

                

                panel.appendChild(downArrowSvg)
                where.appendChild(panel)
            }

            model.contracts.forEach(contract => {
                renderContractPreview(document.getElementById("contracts"), contract)
            })
            

            const renderProfile = () => {
                
            }

            const saveProfile = () => {

            }

            const loadProfile = () => {

            }

        </script>
    </body>
</html>